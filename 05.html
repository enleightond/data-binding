<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Data Binding Warmup</title>
    <script type="text/javascript">
      // Challenge #1
      // start with the code from 04.html
      // using setInterval, make it so that if you change window.pizzaSize in Chrome dev tools
      // the pizzaSize inputs and labels will change with it
     document.addEventListener('DOMContentLoaded', function () {
      var matches = document.querySelectorAll('[data-bind]')
        for (var i = 0; i < matches.length; i++) {
          if (matches[i].tagName === 'INPUT'){  
            addlistener(i);
            }
          //console.log(matches[i].attributes['data-bind'].value)
          };
        function addlistener(j){
          matches[j].addEventListener('keyup', function(){
            var key = matches[j].attributes['data-bind'].value;
              window[key] = matches[j].value;                
                for (var k =0; k < matches.length; k++){
                  if (matches[k].attributes['data-bind'].value === key){
                    if (matches[k].tagName === 'INPUT'){
                      matches[k].value = matches[j].value;
                      } else {
                          matches[k].innerHTML = matches[j].value;
                      }
                  }
                }
          })
        }
      }) 
     setInterval(function(){
      var pizzaProp = document.querySelectorAll('[data-bind]')
      for (var i = 0; i < pizzaProp.length; i++){
        var key = pizzaProp[i].attributes['data-bind'].value;
        if (pizzaProp[i].tagName === "SPAN") {
          pizzaProp[i].innerHTML = window[key]    
        } else {
          pizzaProp[i].value = window[key];
        }
      }
     }, 1000)
    </script>
  </head>
  <body>
    <fieldset>
      <legend>Pizza Size</legend>
      <p>
        <label for="pizza-size">What size would you like your pizza?</label>
        <input type="text" id="pizza-size" name="size" value="" data-bind="pizzaSize">
      </p>
      <p>
        <strong>Size: </strong>
        <span data-bind="pizzaSize"></span>
      </p>
    </fieldset>
    <fieldset>
      <legend>Crust</legend>
      <p>
        <label for="pizza-crust">What crust would you like your pizza?</label>
        <input type="text" id="pizza-crust" name="size" value="" data-bind="pizzaCrust">
      </p>
      <p>
        <strong>Crust: </strong>
        <span data-bind="pizzaCrust"></span>
      </p>
    </fieldset>
    <fieldset>
      <legend>Pizza Size</legend>
      <p>
        <label for="pizza-size-2">What size would you like your pizza?</label>
        <input type="text" id="pizza-size-2" name="size" value="" data-bind="pizzaSize">
      </p>
      <p>
        <strong>Size: </strong>
        <span data-bind="pizzaSize"></span>
      </p>
    </fieldset>
    <fieldset>
      <legend>Crust</legend>
      <p>
        <label for="pizza-crust-2">What crust would you like your pizza?</label>
        <input type="text" id="pizza-crust-2" name="size" value="" data-bind="pizzaCrust">
      </p>
      <p>
        <strong>Crust: </strong>
        <span data-bind="pizzaCrust"></span>
      </p>
    </fieldset>
  </body>
</html>
